{
    "componentChunkName": "component---src-pages-api-connect-graph-ql-index-mdx",
    "path": "/api-connect/GraphQL/",
    "result": {"pageContext":{"frontmatter":{"description":"Api Connect / Graph QL","title":"Api Connect / Graph QL"},"relativePagePath":"/api-connect/GraphQL/index.mdx","titleType":"page","MdxNode":{"id":"bdfe62d2-1957-5916-a935-c1f79b613137","children":[],"parent":"b71fedf7-0ca2-5f61-bf0f-b72668fc3523","internal":{"content":"# IBM API Connect\n\n## Creating a GraphQL Proxy API\n\n[Return to main APIC lab page](../ReadMe.md#lab-abstracts)\n\n---\n\n# Table of Contents \n- [1. Introduction](#introduction)\n\n- [2. Create a GraphQL Proxy API](#create)\n\n- [3. Test the API](#test_api)\n\n- [4. Create a Product](#create_product)\n\n- [5. Test GraphQL API from the Developer Portal](#test_api_portal)\n\n- [6. Summary](#summary)\n    \n---\n\n# 1. Introduction <a name=\"introduction\"></a>\n\nIn this lab, we will explore how to define GraphQL APIs that proxy to a backend GraphQL server. \n\nGraphQL is a query language for APIs that gives an application client greater control over what data it retrieves in an API request when compared with a REST API request.\n\nAPI Connect GraphQL support provides the ability to set rate limits and other controls using the API Gateway.\n\nIn this lab, you will explore the following key capabilities:\n\n-   Create a GraphQL Proxy API\n\n-   Learn about GraphQL introspection and Schema Editor\n\n-   Test APIs by using the built-in GraphQL editor\n\n-   Publish the API to the Portal and test\n\n# 2. Create a GraphQL Proxy API <a name=\"create\"></a>\n\n1\\. Since this API is hosted on the local cluster where self-signed certificates are being used, you will need to add an exception.  In a browser, enter the following URL:  https://graphql-test-server-graphql-test-server.apps.cody.coc-ibm.com/accounts/graphql\n**Note:** You may get a warning message that your connection is not private.  If you get this message, you can add an exception.  \n\nTo add an exception in the Chrome browser, click **Advanced** and then click **Proceed** to the URL.  \n\nTo add an exception in the Firefox browser, click **Advanced** and then click **Accept the Risk and Continue**.\n\n![alt text][pic94] \n\n2\\. To quickly test the API, enter the following in GraphiQL Editor window. You may use Prettify option to view formatting string.\n\n```\n{\n  accounts(limit: 2) {\n    name {\n      first\n      last\n    }\n  }\n}\n```\n\n![alt text][pic95]\n\n3\\. Click the **Execute query** icon.\n\n![alt text][pic96]\n\n![alt text][pic97]\n\n4\\. In a browser window, enter the URL for the Platform Navigator that is provided by your instructor.\n\n5\\. From the home screen, navigate to the API Connect instance, **apim-demo** under **API lifecycle management**.  \n\n**Note:** If you are on a different screen, click on **IBM Cloud Pak** in the upper left.\n\n![alt text][pic7]\n\n6\\. Click **Common Services User Registry**.\n\n![alt text][pic8]\n\n7\\. When you log in for the first time, you may see a **Get started** window. Feel free to review the contents and close the window.\n\n8\\. Confirm that you are in the provider organization for your username (upper right) and then click on **Develop APIs and products**.\n\n![alt text][pic10]\n\n9\\. We are now able to begin to create APIs and Products.  Click **Add**.\n\n![alt text][pic11]\n\n10\\. Click **API (from REST, GraphQL or SOAP)**.\n\n![alt text][pic12]\n\n11\\. Click **From existing GraphQL service (GraphQL proxy)** under **Create** and click **Next**.\n\n![alt text][pic13]\n\n12\\. Enter the following values and click **Next**. You can accept the default values for the rest of the fields.\n\n- Title:  accounts\n- GraphQL server URL:  https://graphql-test-server.apps.palpatine.coc-ibm.com/accounts/graphql\n\n![alt text][pic14]\n\n**Note**:  If you get an error that indicates \"**Error connecting** Try again or upload a schema, the exception was not added (See Step #1).\n\n![alt text][pic93]  \n\n13\\. The schema validator reports warning and errors if found. There are two warning in the accounts schema imported from the server. You can review the schema warning details and also select the end points interested for this proxy. Select all the available end points. Click **View**.\n\n![alt text][pic15]\n\n14\\. A review of the schema shows that no limits are set on the size of the lists. You will fix these warnings in later steps. Click on the **X** to close the window.\n\n![alt text][pic16]\n\n15\\. Click **Next** to continue.\n\n![alt text][pic17]\n\n16\\. Make sure both **Secure using Client ID** and **CORS** are selected and click **Next**.\n\n![alt text][pic18]\n\n17\\. API Connect successfully created a GraphQL proxy API. You can edit the API to view more details on the proxy API just created. Click **Edit API** to continue.\n\n![alt text][pic19]\n\n18\\. GraphQL APIs are structured the same as REST APIs with some additional options. Just like REST APIs, you will be able to add security definitions, properties and activity logs from the left menu bar. \n\nYou can also view the Source and Assemble tabs similar to REST APIs. You will notice a new tab for GraphQL APIs. \n\nClick on **GraphQL Schema** tab to view the schema.\n\n![alt text][pic20]\n\n19\\. The GraphQL Schema editor displays Type and Weight information. The weighting factor is used when calculating the type cost for a request to the GraphQL API. For example, a field that requires extensive CPU or memory use on the server to retrieve its value would be given a higher cost.\n\n![alt text][pic21]\n\n20\\. Click on the **Warning** icon to review the warning details for Query and Account. \n\n![alt text][pic22]\n\n21\\. The Warnings window gives us the option to fix the warning by applying the limits. You can either click Apply for each warning or click Apply All to fix both warnings. Click **Apply all**.\n\n![alt text][pic23]\n\n22\\. You will see a summary of the suggestions. Click **Apply**.\n\n![alt text][pic24]\n\n23\\. After applying the recommendations, you will no longer see any warning messages.  Click **Save** to save the API definition.\n\n![alt text][pic25]\n\nOnce saved, you will see an indicator window appear that shows that **Your API has been updated**.  Click on the **X** to close the window.  You should no longer see the warning indicator.\n\n![alt text][pic26]\n\n24\\. Select the **Gateway** tab to view the API. The flow is automatically created as part of the initial API creation. You may apply addition logic by dragging and dropping items from the pallet to the canvas. In this lab, we will not be adding additional logic.\n\n![alt text][pic27]\n\n![alt text][pic28]\n\n25\\. To publish the API, toggle the switch from offline to online.\n\n![alt text][pic29]\n\n[pic0]: images/0.png\n[pic1]: images/1.png\n[pic2]: images/2.png\n[pic3]: images/3.png\n[pic4]: images/4.png\n[pic5]: images/5.png\n[pic6]: images/6.png\n[pic7]: images/7.png\n[pic8]: images/8.png\n[pic9]: images/9.png\n[pic10]: images/10.png\n[pic11]: images/11.png\n[pic12]: images/12.png\n[pic13]: images/13.png\n[pic14]: images/14.png\n[pic15]: images/15.png\n[pic16]: images/16.png\n[pic17]: images/17.png\n[pic18]: images/18.png\n[pic19]: images/19.png\n[pic20]: images/20.png\n[pic21]: images/21.png\n[pic22]: images/22.png\n[pic23]: images/23.png\n[pic24]: images/24.png\n[pic25]: images/25.png\n[pic26]: images/26.png\n[pic27]: images/27.png\n[pic28]: images/28.png\n[pic29]: images/29.png\n[pic93]: images/93.png\n[pic94]: images/94.png\n[pic95]: images/95.png\n[pic96]: images/96.png\n[pic97]: images/97.png\n\n# 3. Test the API <a name=\"test_api\"></a>\n\nIn the API Designer, you have the ability to test the API immediately after creation in the Assemble view!\n\n1\\. You will see an indicator window appear that shows that **Your API has been updated**. Click on the **X** to close the window. You should see that the API is now Online.\n\n![alt text][pic30]\n\n2\\. Click on the **Test** tab. **Note:** Issues have been noted with the Safari browser.\n\n![alt text][pic31]\n\n3\\. For the **Request**, select the request that begins with **GET** and ends in **../accounts/graphql**.\n\n![alt text][pic32]\n\n4\\. The API Connect Test feature also includes a GraphQL Editor. Enter the following in GraphiQL Editor window. You may use Prettify option to view formatting string.\n\n```\n{\n  accounts(limit: 2) {\n    name {\n      first\n      last\n    }\n  }\n}\n```\n![alt text][pic33]\n\n**Note:** You may get a **No response received** popup. Click **Open the server**.\n\n![alt text][pic34]\n\nThis will take you to the GraphiQL editor.\n\n![alt text][pic35]\n\nYou may need to add a security exception. To add an exception in the Chrome browser, click in the whitespace of the page.\n\n![alt text][pic36]\n\nBlindly type **thisisunsafe**.  \n\nTo add an exception in the Firefox browser, click **Advanced** and click **Accept the Risk and Continue**.\n\n![alt text][pic38]\n\n![alt text][pic39]\n\nYou could run the query from this editor. However, you would need to input the Client ID.   **Note:** Steps 9-12 show you how to get the Client ID.  For this step, we will return back to the **API Connect** browser.\n\n5\\. Navigate back to the **API Connect** browser window.\n\n6\\. Click the **Execute Query** icon.\n\n![alt text][pic41]\n\n7\\. The results for GraphQL request are displayed on the right panel. In the request we limited the values to 2, so only two accounts are displayed.   **Note**:  The values that you see may differ from the screenshot.\n\n![alt text][pic42]\n\n8\\. Change the value to 5.\n\n![alt text][pic43]\n\n**Note:** You may get a **No response received** popup. Click **Open the server**.\n\n![alt text][pic34]\n\nThis will take you to the GraphiQL editor.\n\n![alt text][pic35]\n\n9\\. In the previous test example, we used the GraphiQL editor that is part of the test feature. In the next step, we will use this GraphiQL editor. Navigate back to the **API Connect** browser window.\n\n10\\. Click on the **Parameters** tab.\n\n![alt text][pic44]\n\n11\\. Copy the **X-IBM-Client-Id**.\n\n![alt text][pic45]\n\n12\\. Navigate to the **GraphiQL editor** browser window.\n\nPaste the Client ID that you copied in the previous step into the **Client ID** field and click **Set credentials**.\n\n![alt text][pic46]\n\n13\\. Enter the following into the GraphiQL editor and click on the **Execute Query** icon.\n\n```\n{\n  accounts(limit: 5) {\n    name {\n      first\n      last\n    }\n  }\n}\n```\n\n![alt text][pic47]\n\n14\\. You will see 5 accounts are returned in the results window.  **Note**:  The values that you see may differ from the screenshot.\n\n\n![alt text][pic48]\n\n15\\. You can request additional data fields (refer to the schema editor for details). GraphQL may reject if certain fields are locked or prohibited. To test this, enter CreditCard information in the request field and click **Execute Query**.\n\n**Note:** creditCard is outside of accounts object.\n\n```\n{\n  accounts(limit: 2) {\n    name {\n      first\n      last\n    }\n    shippingAddress {\n      building\n      street\n    }\n  }\n  creditCard {\n    number\n    expirationDate\n  }\n}\n```\n\n![alt text][pic49]\n\n16\\. You will notice that an error message is displayed in the results window instead of the account values as the server restricts the query field creditCard.\n\n![alt text][pic50]\n\n17\\. Navigate back to the **API Connect** browser window and click on **GraphQL Schema**.\n\n![alt text][pic88]\n\n18\\. Expand the **Query** type.\n\n![alt text][pic89]\n\n19\\. Notice that only **accounts** is listed.\n\n![alt text][pic90]\n\n20\\. Expand the **Account** type.\n\n![alt text][pic91]\n\n21\\. Notice that creditCard is listed under the Account object.\n\n![alt text][pic92]\n\n22\\. Navigate to the **GraphiQL editor** browser window. \n\n23\\. Submit another request to get account, shipping address, and credit card details and click **Execute Query**.\n\n**Note:** creditCard is inside of accounts object.\n\n```\n{\n  accounts(limit: 2) {\n    name {\n      first\n      last\n    }\n    shippingAddress {\n      building\n      street\n    }\n  creditCard {\n    number\n    expirationDate\n  }\n}\n}\n```\n![alt text][pic51]\n\n24\\. This time values are returned without errors.\n\nWhile outside of the scope of this lab, you could use the Redaction policy to completely remove or to redact specified fields from the Request body, the Response body, and the activity logs. You might find this policy useful for removing or blocking out sensitive data (for example, credit card details) for legal, security, or other reasons.\n\n![alt text][pic52]\n\n[pic30]: images/30.png\n[pic31]: images/31.png\n[pic32]: images/32.png\n[pic33]: images/33.png\n[pic34]: images/34.png\n[pic35]: images/35.png\n[pic36]: images/36.png\n[pic37]: images/37.png\n[pic38]: images/38.png\n[pic39]: images/39.png\n[pic40]: images/40.png\n[pic41]: images/41.png\n[pic42]: images/42.png\n[pic43]: images/43.png\n[pic44]: images/44.png\n[pic45]: images/45.png\n[pic46]: images/46.png\n[pic47]: images/47.png\n[pic48]: images/48.png\n[pic49]: images/49.png\n[pic50]: images/50.png\n[pic51]: images/51.png\n[pic52]: images/52.png\n[pic88]: images/88.png\n[pic89]: images/89.png\n[pic90]: images/90.png\n[pic91]: images/91.png\n[pic92]: images/92.png\n\n\n# 4. Create a Product<a name=\"create_product\"></a>\n\nIn this lab, we will make the API available to developers. In order to do so, the API must be first put into a product and then published to the Sandbox catalog. A product dictates rate limits and API throttling.\n\n1\\. Navigate back to the **API Connect** browser window.\n\n2\\. Click on the **Develop** icon from the left menu bar.\n\n![alt text][pic53]\n\n3\\. Click on the **Products** tab.\n\n![alt text][pic54]\n\n4\\. Click on **Add** and then select **Product** from the list.\n\n![alt text][pic55]\n![alt text][pic56]\n\n5\\. Confirm that **New product** is selected and click **Next**.\n\n![alt text][pic57]\n\n6\\. Enter **Accounts** for the **Title** and click **Next**.\n\n![alt text][pic58]\n\n7\\. Select **accounts** and click **Next**.  **Note:** Depending on how many labs you have completed, you may see additional APIs in your list.\n\n![alt text][pic59]\n\n8\\. You can keep the values for the Default Plan and click **Next**.\n\n![alt text][pic60]\n\n9\\. Select **Publish product** and confirm that **Public** is selected for **Visibility** and **Authenticated** is selected for **Subscribability** and click **Next**.\n\n![alt text][pic61]\n\n10\\. Once the product has been published.  Click **Done**.\n\n![alt text][pic62]\n\n[pic53]: images/53.png\n[pic54]: images/54.png\n[pic55]: images/55.png\n[pic56]: images/56.png\n[pic57]: images/57.png\n[pic58]: images/58.png\n[pic59]: images/59.png\n[pic60]: images/60.png\n[pic61]: images/61.png\n[pic62]: images/62.png\n\n# 5. Test GraphQL API from the Developer Portal<a name=\"test_api_portal\"></a>\n\n1\\. Click on the **Manage** icon from the left menu bar.\n\n![alt text][pic63]\n\n2\\. Click on the **Sandbox**.\n\n![alt text][pic64]\n\n3\\. Click on the **Catalog settings** tab.\n\n![alt text][pic65]\n\n4\\. Click on **Portal** in the left menu bar of the Sandbox catalog.\n\n![alt text][pic66]\n\n5\\. Copy the **Portal URL** and paste it in a new browser tab.\n\n![alt text][pic67]\n\n6\\. The IBM API Connect Developer Portal provides consumers access to API Catalog information.  This gives application developers the opportunity to explore and test APIs, register applications, and subscribe to Plans. \n\nA Portal Administrator can customize the look and feel to their organizational specifications. The default Developer Portal looks like the image below.  Note:  Depending on what you have published, the Products that you see may be different.\n\n**Note:** If you get a warning message that your connection is not private.\n\n![alt text][pic68]\n\n7\\. Some Products are visible to all users without an account depending on the Product visibility setting. Additional options are available when you log into the Developer Portal.\n\nClick on **Sign in**.\n\n![alt text][pic69]\n\n8\\. Use the Username and Password for the Portal account that you created in \"The Developer Portal Experience\" lab and click **Sign in**.\n\n![alt text][pic70]\n\n9\\. IBM API Connect enforces entitlement rules to ensure that consumers are allowed to access the APIs that are being requested.  In the following steps you will register your consumer application and subscribe to an API Product.\n\nClick on **Apps**.\n\n![alt text][pic71]\n\n10\\. Click **Create new app**.\n\n![alt text][pic72]\n\n11\\. Give your application a **title** (e.g., Account Demo) and click **Save**.\n\n![alt text][pic73]\n\n12\\.  When your consumer application is registered in the IBM API Connect system, it is assigned a unique set of client credentials. These credentials must be provided on each API request in order for the system to validate your subscription entitlements. The Client Key can be retrieved anytime but the Client Secret can only be retrieved at this time.\n\nMake note of your **Client Key** and **Client Secret** by click on the copy icon for each.  You will need the Client Secret in a future step.  Click **OK**.\n\n![alt text][pic74]\n\n13\\. At this point, your registered consumer application has no entitlements.\n\nIn order to grant it access to an API resource, you must subscribe to a Product and Plan.\n\n14\\. Click on **API Products**.\n\n![alt text][pic75]\n\n15\\. Click the **Accounts 1.0.0** Product.\n\n![alt text][pic76]\n\n16\\. Click on **Select** for the **Default Plan**.\n\n![alt text][pic77]\n\n17\\. Select the application (e.g., **Account Demo**) that you just created.  **Note:** The number of applications that you see in your environment may differ.\n\n![alt text][pic78]\n\n18\\. Review the subscription information and click **Next**.\n\n![alt text][pic79]\n\n19\\. Click **Done**.\n\n![alt text][pic80]\n\n20\\.  The API Connect Developer Portal allows consumers to test the APIs directly from the website. This feature may be enabled or disabled per-API.\n\nYou should be on a screen that shows the API and Plan for the **Accounts 1.0.0** Product.  If you are not on this screen, click on **API Products** in the top navigation and select the **Accounts 1.0.0** Product.\n\n![alt text][pic81]\n\n21\\. Click on the **accounts 1.0.0** API.\n\n![alt text][pic82]\n\n22\\. Click on the **Try it** tab.\n\n![alt text][pic83]\n\n23\\. For the **API Key**, enter the value that you copied for the Application **Client Key**.\n\n![alt text][pic84]\n\n**Comment to Instructors and Students:**  An issue has been noted that the editor does not render and you are not able to enter account and shipping address detail.  The issue is currently being investigated.\n\n24\\. Enter account and shipping address details and click the **Execute Query** icon.\n\n```\n{\n  accounts(limit: 2) {\n    name {\n      first\n      last\n    }\n    shippingAddress {\n      building\n      street\n      state\n      zip\n    }\n  }\n}\n```\n![alt text][pic85]\n\n25\\. You will see the results populate in the right window.\n\n![alt text][pic86]\n\n26\\. Feel free to submit requests with different field names and watch how quickly the results are returned in the results window. If this was a REST API multiple end points will be needed to achieve the same result.\n\n```\n{\n  accounts(limit: 2) {\n    name {\n      first\n      last\n    }\n  }\n}\n```\n\n![alt text][pic87]\n\n[pic63]: images/63.png\n[pic64]: images/64.png\n[pic65]: images/65.png\n[pic66]: images/66.png\n[pic67]: images/67.png\n[pic68]: images/68.png\n[pic69]: images/69.png\n[pic70]: images/70.png\n[pic71]: images/71.png\n[pic72]: images/72.png\n[pic73]: images/73.png\n[pic74]: images/74.png\n[pic75]: images/75.png\n[pic76]: images/76.png\n[pic77]: images/77.png\n[pic78]: images/78.png\n[pic79]: images/79.png\n[pic80]: images/80.png\n[pic81]: images/81.png\n[pic82]: images/82.png\n[pic83]: images/83.png\n[pic84]: images/84.png\n[pic85]: images/85.png\n[pic86]: images/86.png\n[pic87]: images/87.png\n\n# 7.Summary <a name=\"summary\"></a>\n\nCongratulations, you have completed the **Creating a GraphQL Proxy API** lab. Throughout the lab, you learned how to:\n\n-   Create a GraphQL Proxy API\n\n-   Learn about GraphQL introspection and Schema Editor\n\n-   Test APIs by using the built-in GraphQL editor\n\n-   Publish the API to the Portal and test\n\n[Return to main APIC lab page](../ReadMe.md#lab-abstracts)\n","type":"Mdx","contentDigest":"385fe401e4641c8fa85e6d9476a93885","owner":"gatsby-plugin-mdx","counter":682},"frontmatter":{"description":"Api Connect / Graph QL","title":"Api Connect / Graph QL"},"exports":{},"rawBody":"# IBM API Connect\n\n## Creating a GraphQL Proxy API\n\n[Return to main APIC lab page](../ReadMe.md#lab-abstracts)\n\n---\n\n# Table of Contents \n- [1. Introduction](#introduction)\n\n- [2. Create a GraphQL Proxy API](#create)\n\n- [3. Test the API](#test_api)\n\n- [4. Create a Product](#create_product)\n\n- [5. Test GraphQL API from the Developer Portal](#test_api_portal)\n\n- [6. Summary](#summary)\n    \n---\n\n# 1. Introduction <a name=\"introduction\"></a>\n\nIn this lab, we will explore how to define GraphQL APIs that proxy to a backend GraphQL server. \n\nGraphQL is a query language for APIs that gives an application client greater control over what data it retrieves in an API request when compared with a REST API request.\n\nAPI Connect GraphQL support provides the ability to set rate limits and other controls using the API Gateway.\n\nIn this lab, you will explore the following key capabilities:\n\n-   Create a GraphQL Proxy API\n\n-   Learn about GraphQL introspection and Schema Editor\n\n-   Test APIs by using the built-in GraphQL editor\n\n-   Publish the API to the Portal and test\n\n# 2. Create a GraphQL Proxy API <a name=\"create\"></a>\n\n1\\. Since this API is hosted on the local cluster where self-signed certificates are being used, you will need to add an exception.  In a browser, enter the following URL:  https://graphql-test-server-graphql-test-server.apps.cody.coc-ibm.com/accounts/graphql\n**Note:** You may get a warning message that your connection is not private.  If you get this message, you can add an exception.  \n\nTo add an exception in the Chrome browser, click **Advanced** and then click **Proceed** to the URL.  \n\nTo add an exception in the Firefox browser, click **Advanced** and then click **Accept the Risk and Continue**.\n\n![alt text][pic94] \n\n2\\. To quickly test the API, enter the following in GraphiQL Editor window. You may use Prettify option to view formatting string.\n\n```\n{\n  accounts(limit: 2) {\n    name {\n      first\n      last\n    }\n  }\n}\n```\n\n![alt text][pic95]\n\n3\\. Click the **Execute query** icon.\n\n![alt text][pic96]\n\n![alt text][pic97]\n\n4\\. In a browser window, enter the URL for the Platform Navigator that is provided by your instructor.\n\n5\\. From the home screen, navigate to the API Connect instance, **apim-demo** under **API lifecycle management**.  \n\n**Note:** If you are on a different screen, click on **IBM Cloud Pak** in the upper left.\n\n![alt text][pic7]\n\n6\\. Click **Common Services User Registry**.\n\n![alt text][pic8]\n\n7\\. When you log in for the first time, you may see a **Get started** window. Feel free to review the contents and close the window.\n\n8\\. Confirm that you are in the provider organization for your username (upper right) and then click on **Develop APIs and products**.\n\n![alt text][pic10]\n\n9\\. We are now able to begin to create APIs and Products.  Click **Add**.\n\n![alt text][pic11]\n\n10\\. Click **API (from REST, GraphQL or SOAP)**.\n\n![alt text][pic12]\n\n11\\. Click **From existing GraphQL service (GraphQL proxy)** under **Create** and click **Next**.\n\n![alt text][pic13]\n\n12\\. Enter the following values and click **Next**. You can accept the default values for the rest of the fields.\n\n- Title:  accounts\n- GraphQL server URL:  https://graphql-test-server.apps.palpatine.coc-ibm.com/accounts/graphql\n\n![alt text][pic14]\n\n**Note**:  If you get an error that indicates \"**Error connecting** Try again or upload a schema, the exception was not added (See Step #1).\n\n![alt text][pic93]  \n\n13\\. The schema validator reports warning and errors if found. There are two warning in the accounts schema imported from the server. You can review the schema warning details and also select the end points interested for this proxy. Select all the available end points. Click **View**.\n\n![alt text][pic15]\n\n14\\. A review of the schema shows that no limits are set on the size of the lists. You will fix these warnings in later steps. Click on the **X** to close the window.\n\n![alt text][pic16]\n\n15\\. Click **Next** to continue.\n\n![alt text][pic17]\n\n16\\. Make sure both **Secure using Client ID** and **CORS** are selected and click **Next**.\n\n![alt text][pic18]\n\n17\\. API Connect successfully created a GraphQL proxy API. You can edit the API to view more details on the proxy API just created. Click **Edit API** to continue.\n\n![alt text][pic19]\n\n18\\. GraphQL APIs are structured the same as REST APIs with some additional options. Just like REST APIs, you will be able to add security definitions, properties and activity logs from the left menu bar. \n\nYou can also view the Source and Assemble tabs similar to REST APIs. You will notice a new tab for GraphQL APIs. \n\nClick on **GraphQL Schema** tab to view the schema.\n\n![alt text][pic20]\n\n19\\. The GraphQL Schema editor displays Type and Weight information. The weighting factor is used when calculating the type cost for a request to the GraphQL API. For example, a field that requires extensive CPU or memory use on the server to retrieve its value would be given a higher cost.\n\n![alt text][pic21]\n\n20\\. Click on the **Warning** icon to review the warning details for Query and Account. \n\n![alt text][pic22]\n\n21\\. The Warnings window gives us the option to fix the warning by applying the limits. You can either click Apply for each warning or click Apply All to fix both warnings. Click **Apply all**.\n\n![alt text][pic23]\n\n22\\. You will see a summary of the suggestions. Click **Apply**.\n\n![alt text][pic24]\n\n23\\. After applying the recommendations, you will no longer see any warning messages.  Click **Save** to save the API definition.\n\n![alt text][pic25]\n\nOnce saved, you will see an indicator window appear that shows that **Your API has been updated**.  Click on the **X** to close the window.  You should no longer see the warning indicator.\n\n![alt text][pic26]\n\n24\\. Select the **Gateway** tab to view the API. The flow is automatically created as part of the initial API creation. You may apply addition logic by dragging and dropping items from the pallet to the canvas. In this lab, we will not be adding additional logic.\n\n![alt text][pic27]\n\n![alt text][pic28]\n\n25\\. To publish the API, toggle the switch from offline to online.\n\n![alt text][pic29]\n\n[pic0]: images/0.png\n[pic1]: images/1.png\n[pic2]: images/2.png\n[pic3]: images/3.png\n[pic4]: images/4.png\n[pic5]: images/5.png\n[pic6]: images/6.png\n[pic7]: images/7.png\n[pic8]: images/8.png\n[pic9]: images/9.png\n[pic10]: images/10.png\n[pic11]: images/11.png\n[pic12]: images/12.png\n[pic13]: images/13.png\n[pic14]: images/14.png\n[pic15]: images/15.png\n[pic16]: images/16.png\n[pic17]: images/17.png\n[pic18]: images/18.png\n[pic19]: images/19.png\n[pic20]: images/20.png\n[pic21]: images/21.png\n[pic22]: images/22.png\n[pic23]: images/23.png\n[pic24]: images/24.png\n[pic25]: images/25.png\n[pic26]: images/26.png\n[pic27]: images/27.png\n[pic28]: images/28.png\n[pic29]: images/29.png\n[pic93]: images/93.png\n[pic94]: images/94.png\n[pic95]: images/95.png\n[pic96]: images/96.png\n[pic97]: images/97.png\n\n# 3. Test the API <a name=\"test_api\"></a>\n\nIn the API Designer, you have the ability to test the API immediately after creation in the Assemble view!\n\n1\\. You will see an indicator window appear that shows that **Your API has been updated**. Click on the **X** to close the window. You should see that the API is now Online.\n\n![alt text][pic30]\n\n2\\. Click on the **Test** tab. **Note:** Issues have been noted with the Safari browser.\n\n![alt text][pic31]\n\n3\\. For the **Request**, select the request that begins with **GET** and ends in **../accounts/graphql**.\n\n![alt text][pic32]\n\n4\\. The API Connect Test feature also includes a GraphQL Editor. Enter the following in GraphiQL Editor window. You may use Prettify option to view formatting string.\n\n```\n{\n  accounts(limit: 2) {\n    name {\n      first\n      last\n    }\n  }\n}\n```\n![alt text][pic33]\n\n**Note:** You may get a **No response received** popup. Click **Open the server**.\n\n![alt text][pic34]\n\nThis will take you to the GraphiQL editor.\n\n![alt text][pic35]\n\nYou may need to add a security exception. To add an exception in the Chrome browser, click in the whitespace of the page.\n\n![alt text][pic36]\n\nBlindly type **thisisunsafe**.  \n\nTo add an exception in the Firefox browser, click **Advanced** and click **Accept the Risk and Continue**.\n\n![alt text][pic38]\n\n![alt text][pic39]\n\nYou could run the query from this editor. However, you would need to input the Client ID.   **Note:** Steps 9-12 show you how to get the Client ID.  For this step, we will return back to the **API Connect** browser.\n\n5\\. Navigate back to the **API Connect** browser window.\n\n6\\. Click the **Execute Query** icon.\n\n![alt text][pic41]\n\n7\\. The results for GraphQL request are displayed on the right panel. In the request we limited the values to 2, so only two accounts are displayed.   **Note**:  The values that you see may differ from the screenshot.\n\n![alt text][pic42]\n\n8\\. Change the value to 5.\n\n![alt text][pic43]\n\n**Note:** You may get a **No response received** popup. Click **Open the server**.\n\n![alt text][pic34]\n\nThis will take you to the GraphiQL editor.\n\n![alt text][pic35]\n\n9\\. In the previous test example, we used the GraphiQL editor that is part of the test feature. In the next step, we will use this GraphiQL editor. Navigate back to the **API Connect** browser window.\n\n10\\. Click on the **Parameters** tab.\n\n![alt text][pic44]\n\n11\\. Copy the **X-IBM-Client-Id**.\n\n![alt text][pic45]\n\n12\\. Navigate to the **GraphiQL editor** browser window.\n\nPaste the Client ID that you copied in the previous step into the **Client ID** field and click **Set credentials**.\n\n![alt text][pic46]\n\n13\\. Enter the following into the GraphiQL editor and click on the **Execute Query** icon.\n\n```\n{\n  accounts(limit: 5) {\n    name {\n      first\n      last\n    }\n  }\n}\n```\n\n![alt text][pic47]\n\n14\\. You will see 5 accounts are returned in the results window.  **Note**:  The values that you see may differ from the screenshot.\n\n\n![alt text][pic48]\n\n15\\. You can request additional data fields (refer to the schema editor for details). GraphQL may reject if certain fields are locked or prohibited. To test this, enter CreditCard information in the request field and click **Execute Query**.\n\n**Note:** creditCard is outside of accounts object.\n\n```\n{\n  accounts(limit: 2) {\n    name {\n      first\n      last\n    }\n    shippingAddress {\n      building\n      street\n    }\n  }\n  creditCard {\n    number\n    expirationDate\n  }\n}\n```\n\n![alt text][pic49]\n\n16\\. You will notice that an error message is displayed in the results window instead of the account values as the server restricts the query field creditCard.\n\n![alt text][pic50]\n\n17\\. Navigate back to the **API Connect** browser window and click on **GraphQL Schema**.\n\n![alt text][pic88]\n\n18\\. Expand the **Query** type.\n\n![alt text][pic89]\n\n19\\. Notice that only **accounts** is listed.\n\n![alt text][pic90]\n\n20\\. Expand the **Account** type.\n\n![alt text][pic91]\n\n21\\. Notice that creditCard is listed under the Account object.\n\n![alt text][pic92]\n\n22\\. Navigate to the **GraphiQL editor** browser window. \n\n23\\. Submit another request to get account, shipping address, and credit card details and click **Execute Query**.\n\n**Note:** creditCard is inside of accounts object.\n\n```\n{\n  accounts(limit: 2) {\n    name {\n      first\n      last\n    }\n    shippingAddress {\n      building\n      street\n    }\n  creditCard {\n    number\n    expirationDate\n  }\n}\n}\n```\n![alt text][pic51]\n\n24\\. This time values are returned without errors.\n\nWhile outside of the scope of this lab, you could use the Redaction policy to completely remove or to redact specified fields from the Request body, the Response body, and the activity logs. You might find this policy useful for removing or blocking out sensitive data (for example, credit card details) for legal, security, or other reasons.\n\n![alt text][pic52]\n\n[pic30]: images/30.png\n[pic31]: images/31.png\n[pic32]: images/32.png\n[pic33]: images/33.png\n[pic34]: images/34.png\n[pic35]: images/35.png\n[pic36]: images/36.png\n[pic37]: images/37.png\n[pic38]: images/38.png\n[pic39]: images/39.png\n[pic40]: images/40.png\n[pic41]: images/41.png\n[pic42]: images/42.png\n[pic43]: images/43.png\n[pic44]: images/44.png\n[pic45]: images/45.png\n[pic46]: images/46.png\n[pic47]: images/47.png\n[pic48]: images/48.png\n[pic49]: images/49.png\n[pic50]: images/50.png\n[pic51]: images/51.png\n[pic52]: images/52.png\n[pic88]: images/88.png\n[pic89]: images/89.png\n[pic90]: images/90.png\n[pic91]: images/91.png\n[pic92]: images/92.png\n\n\n# 4. Create a Product<a name=\"create_product\"></a>\n\nIn this lab, we will make the API available to developers. In order to do so, the API must be first put into a product and then published to the Sandbox catalog. A product dictates rate limits and API throttling.\n\n1\\. Navigate back to the **API Connect** browser window.\n\n2\\. Click on the **Develop** icon from the left menu bar.\n\n![alt text][pic53]\n\n3\\. Click on the **Products** tab.\n\n![alt text][pic54]\n\n4\\. Click on **Add** and then select **Product** from the list.\n\n![alt text][pic55]\n![alt text][pic56]\n\n5\\. Confirm that **New product** is selected and click **Next**.\n\n![alt text][pic57]\n\n6\\. Enter **Accounts** for the **Title** and click **Next**.\n\n![alt text][pic58]\n\n7\\. Select **accounts** and click **Next**.  **Note:** Depending on how many labs you have completed, you may see additional APIs in your list.\n\n![alt text][pic59]\n\n8\\. You can keep the values for the Default Plan and click **Next**.\n\n![alt text][pic60]\n\n9\\. Select **Publish product** and confirm that **Public** is selected for **Visibility** and **Authenticated** is selected for **Subscribability** and click **Next**.\n\n![alt text][pic61]\n\n10\\. Once the product has been published.  Click **Done**.\n\n![alt text][pic62]\n\n[pic53]: images/53.png\n[pic54]: images/54.png\n[pic55]: images/55.png\n[pic56]: images/56.png\n[pic57]: images/57.png\n[pic58]: images/58.png\n[pic59]: images/59.png\n[pic60]: images/60.png\n[pic61]: images/61.png\n[pic62]: images/62.png\n\n# 5. Test GraphQL API from the Developer Portal<a name=\"test_api_portal\"></a>\n\n1\\. Click on the **Manage** icon from the left menu bar.\n\n![alt text][pic63]\n\n2\\. Click on the **Sandbox**.\n\n![alt text][pic64]\n\n3\\. Click on the **Catalog settings** tab.\n\n![alt text][pic65]\n\n4\\. Click on **Portal** in the left menu bar of the Sandbox catalog.\n\n![alt text][pic66]\n\n5\\. Copy the **Portal URL** and paste it in a new browser tab.\n\n![alt text][pic67]\n\n6\\. The IBM API Connect Developer Portal provides consumers access to API Catalog information.  This gives application developers the opportunity to explore and test APIs, register applications, and subscribe to Plans. \n\nA Portal Administrator can customize the look and feel to their organizational specifications. The default Developer Portal looks like the image below.  Note:  Depending on what you have published, the Products that you see may be different.\n\n**Note:** If you get a warning message that your connection is not private.\n\n![alt text][pic68]\n\n7\\. Some Products are visible to all users without an account depending on the Product visibility setting. Additional options are available when you log into the Developer Portal.\n\nClick on **Sign in**.\n\n![alt text][pic69]\n\n8\\. Use the Username and Password for the Portal account that you created in \"The Developer Portal Experience\" lab and click **Sign in**.\n\n![alt text][pic70]\n\n9\\. IBM API Connect enforces entitlement rules to ensure that consumers are allowed to access the APIs that are being requested.  In the following steps you will register your consumer application and subscribe to an API Product.\n\nClick on **Apps**.\n\n![alt text][pic71]\n\n10\\. Click **Create new app**.\n\n![alt text][pic72]\n\n11\\. Give your application a **title** (e.g., Account Demo) and click **Save**.\n\n![alt text][pic73]\n\n12\\.  When your consumer application is registered in the IBM API Connect system, it is assigned a unique set of client credentials. These credentials must be provided on each API request in order for the system to validate your subscription entitlements. The Client Key can be retrieved anytime but the Client Secret can only be retrieved at this time.\n\nMake note of your **Client Key** and **Client Secret** by click on the copy icon for each.  You will need the Client Secret in a future step.  Click **OK**.\n\n![alt text][pic74]\n\n13\\. At this point, your registered consumer application has no entitlements.\n\nIn order to grant it access to an API resource, you must subscribe to a Product and Plan.\n\n14\\. Click on **API Products**.\n\n![alt text][pic75]\n\n15\\. Click the **Accounts 1.0.0** Product.\n\n![alt text][pic76]\n\n16\\. Click on **Select** for the **Default Plan**.\n\n![alt text][pic77]\n\n17\\. Select the application (e.g., **Account Demo**) that you just created.  **Note:** The number of applications that you see in your environment may differ.\n\n![alt text][pic78]\n\n18\\. Review the subscription information and click **Next**.\n\n![alt text][pic79]\n\n19\\. Click **Done**.\n\n![alt text][pic80]\n\n20\\.  The API Connect Developer Portal allows consumers to test the APIs directly from the website. This feature may be enabled or disabled per-API.\n\nYou should be on a screen that shows the API and Plan for the **Accounts 1.0.0** Product.  If you are not on this screen, click on **API Products** in the top navigation and select the **Accounts 1.0.0** Product.\n\n![alt text][pic81]\n\n21\\. Click on the **accounts 1.0.0** API.\n\n![alt text][pic82]\n\n22\\. Click on the **Try it** tab.\n\n![alt text][pic83]\n\n23\\. For the **API Key**, enter the value that you copied for the Application **Client Key**.\n\n![alt text][pic84]\n\n**Comment to Instructors and Students:**  An issue has been noted that the editor does not render and you are not able to enter account and shipping address detail.  The issue is currently being investigated.\n\n24\\. Enter account and shipping address details and click the **Execute Query** icon.\n\n```\n{\n  accounts(limit: 2) {\n    name {\n      first\n      last\n    }\n    shippingAddress {\n      building\n      street\n      state\n      zip\n    }\n  }\n}\n```\n![alt text][pic85]\n\n25\\. You will see the results populate in the right window.\n\n![alt text][pic86]\n\n26\\. Feel free to submit requests with different field names and watch how quickly the results are returned in the results window. If this was a REST API multiple end points will be needed to achieve the same result.\n\n```\n{\n  accounts(limit: 2) {\n    name {\n      first\n      last\n    }\n  }\n}\n```\n\n![alt text][pic87]\n\n[pic63]: images/63.png\n[pic64]: images/64.png\n[pic65]: images/65.png\n[pic66]: images/66.png\n[pic67]: images/67.png\n[pic68]: images/68.png\n[pic69]: images/69.png\n[pic70]: images/70.png\n[pic71]: images/71.png\n[pic72]: images/72.png\n[pic73]: images/73.png\n[pic74]: images/74.png\n[pic75]: images/75.png\n[pic76]: images/76.png\n[pic77]: images/77.png\n[pic78]: images/78.png\n[pic79]: images/79.png\n[pic80]: images/80.png\n[pic81]: images/81.png\n[pic82]: images/82.png\n[pic83]: images/83.png\n[pic84]: images/84.png\n[pic85]: images/85.png\n[pic86]: images/86.png\n[pic87]: images/87.png\n\n# 7.Summary <a name=\"summary\"></a>\n\nCongratulations, you have completed the **Creating a GraphQL Proxy API** lab. Throughout the lab, you learned how to:\n\n-   Create a GraphQL Proxy API\n\n-   Learn about GraphQL introspection and Schema Editor\n\n-   Test APIs by using the built-in GraphQL editor\n\n-   Publish the API to the Portal and test\n\n[Return to main APIC lab page](../ReadMe.md#lab-abstracts)\n","fileAbsolutePath":"/Users/luciano/pot-workspace/my-carbon-site/src/pages/api-connect/GraphQL/index.mdx"}}},
    "staticQueryHashes": ["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}